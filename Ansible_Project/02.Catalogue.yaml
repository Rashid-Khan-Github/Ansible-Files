- name: Install catalogue service
  hosts: catalogue
  become: true
  tasks:
  - name: Setup NPM Source
    shell: "curl -sL https://rpm.nodesource.com/setup_lts.x | bash"

  - name: Install NodeJs
    yum:
      name: nodejs
      state: installed

  - name: Check whether user "Roboshop" is available
    command: id roboshop
    register: cmdOut
    ignore_errors: true

  - name: Print Command Output
    debug:
      msg: "Command Output : {{cmdOut}}"
  - name: Print Exit Status
    debug:
      msg: "Exit Status : {{cmdOut.rc}}"
  
  - when: cmdOut.rc != 0
    name: Create User Roboshop
    become: true
    user:
      name: roboshop

  - name: Check /app directory is available or not
    stat:
      path: /app
      register: directory
  - name: Print directory status
    debug:
      msg: "Directory Status : {{directory}}"
      

